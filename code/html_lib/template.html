<div class="row">

	<!-- Earnings (Monthly) Card Example -->
	<div class="col-xl-6 col-md-6 mb-4">
		<div class="card border-left-primary shadow h-100 py-2">
			<div class="card-body">
				<div class="row no-gutters align-items-center">
					<div class="col mr-2">
						<div class="text-xs text-uppercase mb-1">
							推定市場年収</div>
						<div class="h4 mb-0 font-weight-bold text-success text-gray-800">{{ basic["money"] }}<small class="text-dark h6">万円/年 ~ </small>{{ basic["overtime"] }}<small class="text-dark h6">万円/年</small> </div>
					</div>
					<div class="col-auto">
						<i class="fas fa-calendar fa-2x text-gray-300"></i>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-lg-6 mb-4">
		<!-- Illustrations -->
		<div class="card shadow mb-4">
			<div class="card-header py-3">
				<h6 class="m-0 font-weight-bold text-primary">{{ name }}の年収</h6>
			</div>
			<div class="card-body">
				<!--
				<div class="text-center">
					<img class="img-fluid px-3 px-sm-4 mt-3 mb-4" style="width: 25rem;" src="img/undraw_posting_photo.svg" alt="...">
				</div>
				-->
				<p>
					{{ md_money }}
				</p>
				<a target="_blank" rel="nofollow" href="https://undraw.co/">Browse Illustrations on
					unDraw →</a>
			</div>
		</div>
	</div>

	<!-- Pending Requests Card Example -->
	<div class="col-xl-6 col-md-6 mb-4">
		<div class="card border-left-warning shadow h-100 py-2">
			<div class="card-body">
				<div class="row no-gutters align-items-center">
					<div class="col mr-2">
						<div class="text-xs text-uppercase mb-1">
							おすすめ度(5段階評価)</div>
						<div class="h5 mb-0 font-weight-bold text-gray-800 text-warning"> {{ stars }} </div>
					</div>
					<div class="col-auto">
						<i class="fas fa-comments fa-2x text-gray-300"></i>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Earnings (Monthly) Card Example -->
	<div class="col-xl-6 col-md-6 mb-4">
		<div class="card border-left-success shadow h-100 py-2">
			<div class="card-body">
				<div class="row no-gutters align-items-center">
					<div class="col mr-2">
						<div class="text-xs font-weight-bold primary-text text-uppercase mb-1">
							求人件数</div>
						<div class="h5 mb-0 font-weight-bold text-gray-800">{{ basic["count"] }} 件</div>
					</div>
					<div class="col-auto">
						<i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Earnings (Monthly) Card Example -->
	<div class="col-xl-6 col-md-6 mb-4">
		<div class="card border-left-info shadow h-100 py-2">
			<div class="card-body">
				<div class="row no-gutters align-items-center">
					<div class="col mr-2">
						<div class="text-xs font-weight-bold text-info  mb-1">リモート普及率
						</div>
						<div class="row no-gutters align-items-center">
							<div class="col-auto">
								<div class="h5 mb-0 mr-3 font-weight-bold text-uppercase text-gray-800">{{ basic["remote"] }}%</div>
							</div>
							<div class="col">
								<div class="progress progress-sm mr-2">
									<div class="progress-bar bg-info" role="progressbar" style="width: {{ basic["remote"] }}%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-auto">
						<i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
					</div>
				</div>
			</div>
		</div>
	</div>


</div>

<div class="row">

</div>




<h2>{{ name }}の評価 </h2>





<table width="100%">
	<tr>
		<td>
			<div>
				<canvas id="abilityChart" width="350" height="250"></canvas>
			</div>
		</td>
		<td>
			<table style="border:none;">
				<tr>
					<td>
						下限年収
					</td>
					<td>
						{{basic["money"] }} <br>万円 / 年
					</td>
				</tr>
				<tr>
					<td>
						上限年収
					</td>
					<td>
						{{ basic["overtime"] }} <br>万円 / 年
					</td>
				</tr>
				<tr>
					<td>
						フォロワー数(Qiita)
					</td>
					<td>
						{{ basic["qiita_score"] }} 人
					</td>
				</tr>
				<tr>
					<td>
						リモート率
					</td>
					<td>
						{{ basic["remote"] }} %
					</td>
				</tr>
				<tr>
					<td>
						求人件数
					</td>
					<td>
						{{ basic["count"] }} 件
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>

<p>
{{ md_value }}
</p>







<h2>{{ name }}の年収分布</h2>

<div><canvas id="chart1"></canvas></div>

<p>
	{{ md_money_array }}
</p>

<script>
	var backgroundColor = "#1ABB9C" // Green
	var backgroundGray = 'rgba(33, 37, 41, 0.3)'
	var label_colors = {
		"money" :"#00204a",
		"overtime" : "#1ABB9C",
		"qiita_score" : "#005792",
		"remote" : "#00bbf0",
		"count" : "#42b883"
	}
	// ボタンをクリック
	window.onload = function(){
		labels = ['100万', '200万', '300万','400万', '500万', '600万', '700万', '800万', '900万', '1000万']
		data1 = {{ money_countlist['lower'] }}
		data2 = {{ money_countlist['upper'] }}
		DrawChart(labels, data1, data2); // グラフを再描画
		DrawPorChart();
	}

	// グラフ描画処理
	function DrawChart(labels, data1, data2) {
		var ctx = document.getElementById('chart1').getContext('2d');
		window.myChart = new Chart(ctx, {
		type: 'bar',
		data: {
			labels: labels,
			datasets: [{
			label: '下限年収 (件)',
			data: data1,
			backgroundColor: label_colors.money
			}, {
			label: '上限年収 (件)',
			data: data2,
			backgroundColor: label_colors.overtime
			}]
		},
		options: {
			y: {
			min: 0,
			max: 15000,
			},
		},
		});
	}

	function DrawPorChart(){
		var LABEL_MASTER = [
			{
				"key" : "money",
				"name" : "下限年収"
			},
			{
				"key" : "overtime",
				"name" : "上限年収"
			},
			{
				"key" : "qiita_score",
				"name" : "フォロワー数(Qiita)"
			},
			{
				"key" : "remote",
				"name" : "リモート率"
			},
			{
				"key" : "count",
				"name" : "求人件数"
			}
		]
		var labelname = "{{ name }}"
		var score_100 = {{ score_100 }}
		var data = LABEL_MASTER.map((row)=>(score_100[row.key]))
		var labels = LABEL_MASTER.map((row)=>row.name)

		var ctx = document.getElementById("abilityChart");
		var myRadarChart = new Chart(ctx, {
			type: 'radar', 
			data: { 
				labels: labels,
				datasets: [{
					label: labelname,
					data: data,
					backgroundColor: backgroundGray,
					//borderColor: backgroundColor,
					borderColor: '#1ABB9C',
					borderWidth: 1
				}],
				color: "rgba(33, 37, 41, 0.3)",
			},
			options: {
				elements: {
					line: {
						borderWidth: 3
					}
				},
				maintainAspectRatio: false,
				scale: {
					ticks: {
						// 最小値の値を0指定
						beginAtZero: true,
						min: 0,
						max: 100,
						//背景色
						backgroundColor: 'snow',
						//グリッドライン
						grid: {
						color: '#1ABB9C',
						},
						//アングルライン
						angleLines: {
						color: '#1ABB9C',
						},
						//各項目のラベル
						pointLabels: {
						color: '#1ABB9C',
						},
					},
				}
			}
		});
	}
</script>


